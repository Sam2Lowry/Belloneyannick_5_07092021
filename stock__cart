
/* 

<i class="fa fa-minus text-danger"></i>
        <h5 class="text-grey mt-1 mr-1 ml-1 mx-1">${item.quantity}</h5>
        <i class="fa fa-plus text-success"></i>

/*Object.keys(localStorage).forEach(function(key){
   console.log(localStorage.getItem(key));
   var cartItem = JSON.parse(localStorage.getItem(key));
}); */

/*
const content = `<div
    class="
                  d-flex
                  flex-row
                  justify-content-between
                  align-items-center
                  p-2
                  bg-white
                  mt-4
                  px-3
                  rounded
                "
  >
    <div class="mr-1">
      <img
        class="rounded"
        alt="test"
        src="https://source.unsplash.com/600x600/?camera"
        width="70"
      />
    </div>
    <div class="d-flex flex-column align-items-center product-details">
      <span class="font-weight-bold">Appareil photo numérique</span>
      <div class="d-flex flex-row product-desc">
        <div class="focale mr-1">
          <span class="text-grey">focale:</span>
          <span class="font-weight-bold">&nbsp;50mm</span>
        </div>
      </div>
    </div>
    <div class="d-flex flex-row align-items-center qty">
      <i class="fa fa-minus text-danger"></i>
      <h5 class="text-grey mt-1 mr-1 ml-1 mx-1">2</h5>
      <i class="fa fa-plus text-success"></i>
    </div>
    <div>
      <h5 class="text-grey">€20.00</h5>
    </div>
    <div class="d-flex align-items-center">
      <i class="fa fa-trash mb-1 text-danger"></i>
    </div>
  </div>`;

      //injection dans le html de celle ci au sein de la section produit
      container.innerHTML += content;
    };
    */

    function getId() {
      const itemList = document.querySelector("#cartList");
      itemList.addEventListener("click", (event) => {
        var element = event.target;
        alert(element.closest(".glubiTest").id);
      });
    }

    //Test de validité du formulatire par un reportValidity()
buttonPurchase.addEventListener("click", function () {
  var isValid = document.querySelector("#purchaseForm").reportValidity();
});


// Fonction d'exportation des données vers le Back-end
function exportData() {
  document.getElementById("exportData").addEventListener("click", () => {
    console.log("TEST TEST TEST TEST TEST TEST TEST");
    const validityCheck = () => {
      buttonPurchase.addEventListener("click", function () {
        document.querySelector("#purchaseForm").reportValidity();
      });

    };
    buttonPurchase.addEventListener("click", () => {
      console.log("test");
      let validation = validityCheck();
      if (validation === true) {
        let cameraIds = Cart.map((a) => a.idModel);
        postPurchase({
          contact: {
            firstName: firstNameInput.value,
            lastName: lastNameInput.value,
            address: addressInput.value,
            city: cityInput.value,
            email: emailInput.value,
          },
          products: cameraIds,
        });
      }
    });
  });
}

const postPurchase = async (data) => {
  let request = await fetch(apiPost, {
    method: "POST",
    headers: {
      "content-type": "application/json",
    },
    body: JSON.stringify(data),
  });
  let responseData = await request.json();
  sessionStorage.setItem("receipt", {
    id: responseData.orderId,
    totalPrice: totalCart
  });
};